{% extends 'admin/layout.html.twig' %}

{% block admin_content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Příspěvky</h2>
    <a class="btn btn-primary" href="?action=post_edit">Nový příspěvek</a>
</div>

<div class="table-responsive">
    <table class="table align-middle">
        <thead class="table-light">
            <tr>
                <th style="width: 56px"></th>
                <th>Název</th>
                <th>SEO URL</th>
                <th>Publikováno</th>
                <th>Štítky</th>
                <th class="text-end">Akce</th>
            </tr>
        </thead>
        <tbody>
            {% for post in posts %}
                <tr>
                    <td>
                        {% if post.thumbnail_url %}
                            <img src="{{ post.thumbnail_url }}" alt="{{ post.title }}" class="img-thumbnail" style="width:48px;height:48px;object-fit:cover;">
                        {% else %}
                            <span class="text-muted">–</span>
                        {% endif %}
                    </td>
                    <td class="fw-semibold">
                        {{ post.title }}
                        <div class="small text-muted">{{ post.type.name ?? 'Typ nevybrán' }}</div>
                    </td>
                    <td><code>{{ post.slug ?? '' }}</code></td>
                    <td>{{ post.published_at|date('j.n.Y H:i') }}</td>
                    <td>
                        {% set hasCategories = post.categories is not empty %}
                        {% set hasTags = post.tags_list is not empty %}
                        {% if hasCategories or hasTags %}
                            {% for category in post.categories %}
                                <span class="badge text-bg-primary me-1">{{ category.name }}</span>
                            {% endfor %}
                            {% for tag in post.tags_list %}
                                <span class="badge text-bg-secondary me-1">{{ tag.name }}</span>
                            {% endfor %}
                        {% else %}
                            <span class="text-muted">Bez štítků</span>
                        {% endif %}
                    </td>
                    <td class="text-end"><a class="btn btn-sm btn-outline-primary" href="?action=post_edit&id={{ post.id }}">Upravit</a></td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="5" class="text-center text-muted">Zatím žádné příspěvky.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
